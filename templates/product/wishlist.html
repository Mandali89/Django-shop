{% extends "base/base.html" %}
{% block title %}لیست علاقه‌مندی‌های شما{% endblock %}
{% block start %} {% load static %}

<link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Vazirmatn', sans-serif;
    direction: rtl;
  }
  .card {
    border-radius: 8px;
    box-shadow: 0 0.15rem 1.75rem 0 rgb(33 40 50 / 15%);
  }
  .btn-primary {
    background-color: #0066cc;
    border-color: #0066cc;
  }
  .btn-primary:hover {
    background-color: #004d99;
    border-color: #004d99;
  }
  .btn-danger {
    background-color: #dc3545;
    border-color: #dc3545;
  }
  .btn-danger:hover {
    background-color: #c82333;
    border-color: #c82333;
  }
  h4 {
    color: #212529;
  }
</style>

<section class="section-content padding-y">
  <div class="container">
    {% include 'base/alert.html' %}
    <div class="row">
      <main class="col-md-12">
        {% if wishlist_items %}
        {% for item in wishlist_items %}
        <div class="card mb-3 card-body">
          <table class="table table-borderless table-shopping-cart" style="margin-bottom: 0;">
            <thead class="text-muted">
                <tr class="small text-capitalize">
                  <th scope="col">محصول</th>
                </tr>
              </thead>
            <tbody>
              <tr>
                <td>
                  <figure class="itemside">
                    <div class="aside">
                      <img src="/media/{{ item.product.product_images.first.image }}" class="img-sm"/>
                    </div>
                    <figcaption class="info">
                      <a href="{% url 'get_product' item.product.slug %}" class="title text-dark">
                        {{ item.product.product_name }}
                      </a>

                      <p class="text-muted small">
                        {% if item.size_variant %}
                            سایز: {{ item.size_variant.size_name }}<br />
                        {% else %} سایز: نامشخص <br />
                        {% endif %}
                        {% if item.product.color_variant.exists %}
                            {% for color in item.product.color_variant.all %}
                              رنگ: {{ color.color_name }}<br />
                            {% endfor %}
                        {% else %} رنگ: نامشخص<br />
                        {% endif %}
                        برند: نایک
                      </p>
                      <td class="d-flex justify-content-end">
                        <div class="d-sm-flex ml-2">
                          <form class="mb-2 mb-sm-0 ml-0 ml-sm-3" method="POST" action="{% url 'move_to_cart' item.product.uid %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary">انتقال به سبد خرید</button>
                          </form>

                          <form method="POST" action="{% url 'remove_from_wishlist' item.product.uid %}?size={{ item.size_variant.size_name }}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">حذف</button>
                          </form>
                        </div>
                      </td>
                    </figcaption>
                  </figure>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        {% endfor %}
        {% else %}
          <div class="mb-3">
            <h4>لیست علاقه‌مندی‌های شما خالی است...</h4>
          </div>
          <a class="btn btn-warning" href="{% url 'index' %}">بازگشت به صفحه اصلی</a>
        {% endif %}
      </main>
    </div>
  </div>
</section>

{% endblock %}