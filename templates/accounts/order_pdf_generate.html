{% load static %}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet">

    <title>{% block title %}اطلاعات سفارش{% endblock %}</title>

    <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}" />

    <style>
      body {
        font-family: 'Vazirmatn', sans-serif;
        direction: rtl;
      }
      .card {
        border-radius: 8px;
        box-shadow: 0 0.15rem 1.75rem 0 rgb(33 40 50 / 15%);
      }
      .table th, .table td {
        text-align: right;
      }
      .dlist-align dd {
        text-align: right;
        max-width: 800px;
      }
    </style>
  </head>
  <body>
    <section class="section-content padding-y">
      <div class="container">
        <div class="row">
          <!-- Order Summary -->
          <main class="col-md-12">
            <h3 class="mb-4">خلاصه سفارش</h3>
            <div class="table-responsive mb-4">
              <table class="table table-striped table-bordered">
                <thead class="thead-dark">
                  <tr>
                    <th>محصول</th>
                    <th>سایز</th>
                    <th>رنگ</th>
                    <th>تعداد</th>
                    <th>قیمت</th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in order_items.all %}
                  <tr>
                    <td>{{ item.product.product_name }}</td>
                    <td>{{ item.size_variant.size_name|default:"نامشخص" }}</td>
                    {% if item.size_variant %}
                      {% for color in item.product.color_variant.all %}
                        <td>{{ color.color_name|default:"نامشخص" }}</td>
                      {% endfor %}
                    {% endif %}
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.product_price }} ریال</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </main>

          <main class="col-md-6">
            <h3 class="mb-4">جزئیات سفارش</h3>
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title">اطلاعات سفارش</h5>
                <dl class="dlist-align">
                  <dt style="width: 135px">شماره سفارش:</dt>
                  <dd class="text-right">
                    <strong>{{ order.order_id }}</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">تاریخ ثبت:</dt>
                  <dd class="text-right">
                    <strong>{{ order.order_date|date:"j F Y" }}</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">مشتری:</dt>
                  <dd class="text-right">
                    <strong>{{ order.user.get_full_name }}</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">وضعیت پرداخت:</dt>
                  <dd class="text-right">
                    <strong>{{ order.payment_status }}</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">روش پرداخت:</dt>
                  <dd class="text-right">
                    <strong>{{ order.payment_mode }}</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 136px">آدرس ارسال:</dt>
                  <dd class="text-right">
                    <strong>{{ order.shipping_address|default:"ارائه نشده" }}</strong>
                  </dd>
                </dl>
              </div>
            </div>
          </main>

          <main class="col-md-4">
            <div class="card" style="margin-top: 59px">
              <div class="card-body">
                <h5 class="card-title">خلاصه پرداخت</h5>
                <dl class="dlist-align">
                  <dt style="width: 135px">جمع اقلام:</dt>
                  <dd class="text-right">
                    <strong>{{ order.order_total_price }} ریال</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">تخفیف اعمال‌شده:</dt>
                  <dd class="text-right">
                    <strong>{{ order.coupon.discount_amount|default:"0" }} ریال</strong>
                  </dd>
                </dl>
                <dl class="dlist-align">
                  <dt style="width: 135px">جمع کل:</dt>
                  <dd class="text-right">
                    <strong>{{ order.grand_total }} ریال</strong>
                  </dd>
                </dl>
              </div>
            </div>
          </main>
        </div>
      </div>
    </section>
  </body>
</html>